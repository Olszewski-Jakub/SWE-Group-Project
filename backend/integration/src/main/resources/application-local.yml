spring:
  datasource:
    url: jdbc:postgresql://db:5432/demo_db
    username: demo
    password: demo
    hikari:
      maximum-pool-size: 5
  jpa:
    hibernate:
      ddl-auto: validate
    properties:
      hibernate:
        format_sql: true
        show_sql: false
  sql:
    init:
      mode: never
  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true
  data:
    redis:
      host: ${SPRING_DATA_REDIS_HOST:localhost}
      port: ${SPRING_DATA_REDIS_PORT:6379}
      database: 0
  rabbitmq:
    host: ${RABBITMQ_HOST:localhost}
    port: ${RABBITMQ_PORT:5672}
    username: ${RABBITMQ_USERNAME:guest}
    password: ${RABBITMQ_PASSWORD:guest}
    listener:
      simple:
        acknowledge-mode: MANUAL
        prefetch: 10
        concurrency: 2


management:
  endpoint:
    health:
      show-details: "always"

logging:
  level:
    com.example: DEBUG

app:
  security:
    jwt:
      issuer: "https://example-issuer"
      hmac-secret: "${JWT_SECRET:change-me}"
      authorities-claim: "roles"
    bruteforce:
      email-max: 10
      ip-max: 50
      window-seconds: 900
      key-prefix: "app:"
      backoff-base-seconds: 60
      backoff-factor: 2.0
      backoff-max-seconds: 3600
  auth:
    refresh-ttl-days: 14
    refresh-cookie-name: refreshToken
  flyway:
    repair-on-start: true

email:
  worker:
    enabled: true

mailjet:
  apiKey: ${MAILJET_API_KEY:}
  apiSecret: ${MAILJET_API_SECRET:}
  from:
    email: ${MAIL_FROM_EMAIL:no-reply@example.com}
    name: ${MAIL_FROM_NAME:GroupNine}
