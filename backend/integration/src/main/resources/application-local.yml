spring:
  datasource:
    url: ${DB_URL:jdbc:postgresql://localhost:5432/demo_db}
    username: ${DB_USERNAME:demo}
    password: ${DB_PASSWORD:demo}
    hikari:
      maximum-pool-size: ${DB_MAX_POOL_SIZE:10}
  jpa:
    hibernate:
      ddl-auto: validate
    properties:
      hibernate:
        format_sql: true
        show_sql: false
  sql:
    init:
      mode: never
  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true

  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:}
      database: ${REDIS_DB:0}
  rabbitmq:
    host: ${RABBITMQ_HOST:localhost}
    port: ${RABBITMQ_PORT:5672}
    username: ${RABBITMQ_USERNAME:guest}
    password: ${RABBITMQ_PASSWORD:guest}
    listener:
      simple:
        acknowledge-mode: MANUAL
        prefetch: 10
        concurrency: 2

management:
  endpoint:
    health:
      show-details: "always"

logging:
  level:
    com.example: DEBUG

app:
  security:
    jwt:
      issuer: ${JWT_ISSUER:GroupNine}
      hmac-secret: "${JWT_SECRET:change-me}"
      authorities-claim: ${JWT_AUTHORITIES_CLAIM:roles}
    bruteforce:
      email-max: ${BRUTEFORCE_EMAIL_MAX:10}
      ip-max: ${BRUTEFORCE_IP_MAX:50}
      window-seconds: ${BRUTEFORCE_WINDOW_SECONDS:900}
      key-prefix: "${BRUTEFORCE_KEY_PREFIX:app:}"
      backoff-base-seconds: ${BRUTEFORCE_BACKOFF_BASE_SECONDS:60}
      backoff-factor: ${BRUTEFORCE_BACKOFF_FACTOR:2.0}
      backoff-max-seconds: ${BRUTEFORCE_BACKOFF_MAX_SECONDS:3600}
  auth:
    refresh-ttl-days: ${REFRESH_TOKEN_TTL_DAYS:14}
    refresh-cookie-name: ${REFRESH_TOKEN_COOKIE_NAME:refreshToken}
    # Dev-friendly cookie flags: allow HTTP and same-site requests during local development
    cookie-secure: ${APP_AUTH_COOKIE_SECURE:false}
    cookie-same-site: ${APP_AUTH_COOKIE_SAMESITE:Lax}
  flyway:
    repair-on-start: true
  checkout:
    success-path: "${CHECKOUT_SUCCESS_PATH:/checkout/success}"
    cancel-path: "${CHECKOUT_CANCEL_PATH:/checkout/cancel}"
    shipping:
      allowed-countries: IE,
      rate-ids: shr_1SO4hr5VVAd3gFAtZQYKJSR3, shr_1SO4hS5VVAd3gFAtCCAMifwR
  reservations:
    ttl-seconds: ${RESERVATION_TTL_SECONDS:1800}
  base-url: https://stack-over-flowed-cup.jakubolszewski.dev
  oauth:
    google:
      client-id: ${GOOGLE_CLIENT_ID:}
      client-secret: ${GOOGLE_CLIENT_SECRET:}
      redirect-uri: ${GOOGLE_REDIRECT_URI}/auth/oauth/google/callback
      scopes: ${GOOGLE_SCOPES:openid,email,profile}
      allowed-redirects: ${GOOGLE_ALLOWED_REDIRECTS:https://stack-over-flowed-cup.jakubolszewski.dev}
mailjet:
  apiKey: ${MAILJET_API_KEY:}
  apiSecret: ${MAILJET_API_SECRET:}
  from:
    email: ${MAIL_FROM_EMAIL:no-reply@example.com}
    name: ${MAIL_FROM_NAME:GroupNine}

stripe:
  secret: ${STRIPE_API_KEY:}
  webhook-secret: ${STRIPE_WEBHOOK_SECRET:}
flyway:
  repair-on-start: true
